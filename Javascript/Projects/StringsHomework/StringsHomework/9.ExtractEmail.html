<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Strings - 9</title>
        <link href="styles/js-console.css" rel="stylesheet" />
    </head>
    <body>

        <a href="#" class="js-console-btn" onclick="onBtnClick()">Extract Emails</a>
        <div id="js-console"></div>
        <script src="scripts/js-console.js"></script>
        <script>

            function onBtnClick() {
                var input = "This is simple email:  svetlin@nakov.com and this is another one, admin@nikolay.it";

                var emails = ExtractEmail(input);
                for (var i = 0; i < emails.length; i++)
                    jsConsole.writeLine(emails[i]);

                jsConsole.writeLine("---------------------");
            }

            function ExtractEmail(text) {
                var pattern = /[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?/;
                var arrEmails = new Array();
                var words = text.split(' ');
                for (var i = 0; i < words.length; i++)
                    if (words[i].match(pattern))
                        arrEmails.push(words[i]);
                
                return arrEmails;
            }
        </script>
    </body>
</html>
