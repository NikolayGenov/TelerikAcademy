<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Functions - Find all the occurrences of substring</title>
        <link href="styles/js-console.css" rel="stylesheet" />
    </head>
    <body>
        <label for="tb-text">Text: </label>
        <input id="tb-text" type="text" class="js-console-input" />
        <br />
        <label for="tb-keyword">Keyword: </label>
        <input id="tb-keyword" type="text" class="js-console-input" />

        <label for="tb-caseSen"> Is case sensitive ? </label>
        <input id="tb-caseSen" type="checkbox" class="js-console-input" />
        <a href="#" class="js-console-btn" onclick="findNumWordsBtnClick()">Find all the occurrences of substring</a>
        <div id="js-console"></div>
        <script src="scripts/js-console.js"></script>
        <script>

            function findNumWordsBtnClick() {
                var text = jsConsole.read("#tb-text");
                var keyword = jsConsole.read("#tb-keyword");
                var isSens = false;
                //Get checkbox info
                var caseSens = document.getElementById('tb-caseSen');
                if (caseSens.checked) {
                    isSens = true;
                }
                //Call function and save the result
                var numberOfTimes = CountWords(text, keyword, isSens);
                //Process the result
                if (numberOfTimes != -1) {
                    jsConsole.writeLine("The substring " + keyword + "  has been found " + numberOfTimes + " times in the text/ Case sensitive: " + (isSens? "on": "off"));
                }
                else {
                    jsConsole.writeLine("Keyword not found/ Case sensitive: " + (isSens? "on": "off"));
                }
                jsConsole.writeLine("----------------");
            }
            function CountWords(text, keyword, isSens) {
                // Using while to print the first and then divide the number and get the last
                var arrOfMaches;
                //Depending of if it's case sensitive it will use different regex and match it
                if (isSens) {
                    arrOfMaches = text.match(new RegExp(keyword, 'g'));
                }
                else {
                    arrOfMaches = text.match(new RegExp(keyword, 'gi'));
                }            
                //Return the number of times or -1 if not found
                if (arrOfMaches != null) {
                    //return the number of times it is found
                    return arrOfMaches.length;
                }
                else {
                    //If not found - will return -1
                    return -1;
                }
            }            
        </script>
    </body>
</html>
